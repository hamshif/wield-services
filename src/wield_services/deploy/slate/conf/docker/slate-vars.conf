
deploy_env : dev
debug_mode : nope
runtime_env : docker
kube_context : docker-for-desktop

//module configuration name should be unique in the project
slate : {

  //  provisioner : docker.io/hostpath
  provisioner : kubernetes.io/no-provisioner

  namespace : default
  name : slate
  image : "slate:dev"
  replicas : 1
  codePath : /Users/gbar/dev/Wielder/wield-services/src/wield_services/deploy/slate/image/code_path
  capacityStorage : 200Mi

  nodePort : 30000
  port : 8000
  targetPort : 5000

  debugNodePort : 30001
  debugPort : 8001
  debugTargetPort : 8001

  observe_deploy : true
  observe_svc : false

  flask_app : app
  flask_env : development

  deploy_ports : [
    {
      name : slate
      containerPort : ${slate.targetPort}
    }
  ]

  service_ports : [
    {
      name : slate
      nodePort : ${slate.nodePort}
      port : ${slate.port}
      targetPort : ${slate.targetPort}
    }
  ]
}

// A patch for PersistentVolume docker values
pv.spec.local : {
  path : ${slate.codePath}
}

pv.spec.nodeAffinity : {
  required : {
    nodeSelectorTerms : [
      {
        matchExpressions : [
          {
            key : kubernetes.io/hostname
            operator : In
            values : [
              docker-for-desktop
            ]
          }
        ]
      }
    ]
  }
}
